# Python

## Общее, операторы, выражения, типизация, pip, venv и всякое разное

### Что такое Python

Python - это высокоуровневый, интерпретируемый язык программирования со строгой динамический типизацией

* Плюсы Python:
  * Простота и читаемость(низкий порог входа, высокая скорость написания кодовой базы) 
  * Популярность(практически на все вопросы уже есть ответы в сети)
  * Большая стандартная библиотека(для начала этого достаточно для решения прикладных задач)
  * Мультипарадигменность(поддержка различных парадигм - процедурное, объектно-ориентированное и функциональное)
  * Переносимость(Python работает на различных платформах -  Windows, macOS и Linux) 

* Минусы Python:
  * Время исполнения - Python является интерпретируемым языком, 
  что может приводить к несколько медленной производительности по сравнению с компилируемыми языками, такими как C++. 
  * GIL: Python использует Global Interpreter Lock (GIL), 
  который ограничивает многопоточность и может приводить к проблемам с производительностью в некоторых случаях.

* Особенности Python:
  * Динамическая типизация - что означает, что в Python тип переменной определяется автоматически во время выполнения программы.
  * Сборка мусора - автоматическое управление памятью с помощью механизма сборщика мусора, 
  что упрощает работу с памятью и снижает риск утечек памяти.

### Как работает интерпретатор в Python

* Интерпретатор Python это программа, которая компилирует исходный код в байт-код и 
загружает байт-код в PVM для дальнейшего исполнения
* Байт-код представляет собой набор инструкций, которые последовательно выполняются PVM
* PVM(Python Virtual Machine) - это виртуальная машина, входящая в состав интерпретатора Python.
PVM построчно считывается байт-код, происходит процесс профилирования и оптимизации,
после чего происходит генерация машинного кода. Этот машинный код может быть выполнен на процессоре компьютера.

### Отличия динамическая и статическая типизация

__Статическая типизация__:
типы данных объявляются и проверяются во время компиляции, до запуска программы.
Переменные обязательно должны быть объявлены с указанием их типа, 
и тип переменной не может быть изменен в процессе выполнения программы.
Примеры статически типизированных языков: C, C++, Java.


__Динамическая типизация__:

типы данных проверяются во время выполнения программы.
Переменные не требуют объявления типа, и тип переменной может быть изменен в процессе выполнения.
Примеры динамически типизированных языков: Python, JavaScript, Ruby.

Одним из преимуществ статической типизации является более строгая проверка типов на этапе компиляции, 
что может помочь обнаружить ошибки в типах данных на ранних стадиях разработки. 
Однако, она может быть менее гибкой при работе с различными типами данных.

Динамическая типизация, с другой стороны, обеспечивает большую гибкость в работе с типами данных, 
поскольку переменные могут быть динамически изменены в процессе выполнения программы. 
Однако, она может предоставлять меньшую защиту от ошибок если типы несовместимы.

### Что значит строгая типизация
Строгая типизация в Python означает, что типы переменных проверяются и 
неявные приведения типов между различными типами данных не выполняются автоматически.

Поэтому операции над переменными разных типов данных могут 
вызывать ошибки. Например, если попытаться складывать строку и число, сгенерируется исключение TypeError. 
Python не выполняет автоматическое приведение типов при выполнении таких операций, 
и разработчик должен явно преобразовывать переменные к соответствующим типам.

```python
a = 5
b = "10"
c = a + b  # Приведет к ошибке TypeError
```

### Что такое интроспекция

Introspection в контексте Python - это возможность программы анализировать и 
извлекать информацию о самой себе во время выполнения. 
С помощью introspection в Python можно получить доступ к различным атрибутам и свойствам объектов, 
исследовать их структуру и определить типы данных.

Introspection в Python достигается с помощью встроенных функций и атрибутов, которые предоставляют информацию о объектах и их атрибутах. 
Некоторые из таких функций и атрибутов включают:

type(): Возвращает тип объекта.
dir(): Возвращает список атрибутов объекта.
getattr(): Возвращает значение атрибута объекта по его имени.
hasattr(): Проверяет, содержит ли объект атрибут с определенным именем.
callable(): Проверяет, является ли объект вызываемым (функция, метод и т.д.).

### Как устроены переменные в Python

Python поддерживает ссылочную модель данны. Переменные хранят в себе ссылки на объекты.

Когда создается переменная в Python, то резервируется определенное место в памяти, 
где будет храниться создаваемый объект. 
 
Этапы жизни переменной:

* Объявление переменной: создаем переменную, присвоив ей значение с помощью оператора присваивания (=). 
Например: `x = 10`
* Создание объекта: Python создает объект, со значением 10, и переменная x ссылается на этот объект.
* Изменение значения переменной: можно изменить значение переменной, присвоив ей новое значение. 
При этом переменная будет ссылаться на новый объект, содержащий новое значение(такие действия справедливы для неизменяемых объектов)
* Уничтожение объекта: Если переменная больше не ссылается на какой-либо объект (например, если она переназначена на другое значение или удалена), объект, на который она ранее ссылалась, автоматически уничтожается сборщиком мусора Python.

Важно отметить, что в Python переменные не требуют объявления типа явно, они получают соответствующий тип автоматически на основе присвоенного значения.

### Что означает термин разделяемые ссылки

Термин "разделяемые ссылки" (shared references) относится к ситуации, когда несколько переменных ссылаются на один и тот же объект в памяти.

Когда вы присваиваете одну переменную другой переменной или передаете переменную в функцию, Python не создает новую копию объекта. Вместо этого он создает новую ссылку на существующий объект. Таким образом, может быть несколько переменных, которые разделяют ссылку на один и тот же объект.

Пример:

x = [1, 2, 3]  # создаем список и присваиваем его переменной x
y = x  # создаем новую переменную y и присваиваем ей ссылку на тот же список

x и y разделяют ссылку на один и тот же список [1, 2, 3]. 
Если мы изменим список используя одну переменную, эти изменения применяться к другой переменной:

x.append(4)  # изменяем список через переменную x
print(y)  # [1, 2, 3, 4]

Такое поведение справедливо для изменяемых объектов

### Что такое сборщик мусора

Сборщик мусора (garbage collector) в Python - это механизм, который автоматически освобождает память, 
выделенную для объектов, которые больше не используются в программе. 

Когда создаются объекты в Python, они занимают определенное место в памяти. 
Однако, когда объект больше не нужен и все ссылки на него исчезли объект удаляется из памяти.

Сборщик мусора в Python использует алгоритм - "счетчик ссылок" (reference counting), 
он отслеживает, сколько ссылок существует на каждый объект. 
Каждый раз, когда создается новая ссылка на объект, счетчик ссылок для этого объекта увеличивается. 
Когда ссылка на объект удаляется, счетчик ссылок уменьшается. Когда счетчик ссылок достигает нуля, 
объект считается недоступным и может быть удален сборщиком мусора.

### Что такое циклические ссылки в контексте переменных в Python

Циклические ссылки, это ситуация при которой два или более объекта ссылаются друг на друга
создавая замкнутую цепочку ссылок. Например если объекта А ссылается на объект В
а объект В ссылается на объект А, то это будет циклическая ссылка.

Циклические ссылки могут привести к проблемам с управлением памятью, так как объекты будут всегда иметь ссылку
друг на друга. В результате сборщик мусора не сможет удалить эти объект, даже если 
нет других ссылок на эти объекты в коде.

Придется вызывать удаление вручную используя модуль gc

```python

class Node:
    def __init__(self, val, next):
        self.val = val
        self.next = None
    
node1 = Node(1)
node2 = Node(2)

node1.next = node2
node2.next = node1

```

### Отличие copy() от deepcopy()
Метод copy() и функция deepcopy() в Python используются для создания копий объектов, но они работают по-разному.

Метод copy() создает поверхностную (поверхностную) копию объекта. 
Это означает, что создается новый объект, который содержит ссылки на те же объекты, что и исходный объект. Если в исходном объекте есть изменяемые объекты (например, списки или словари), то изменения в этих объектах будут отражаться и в копии объекта.

deepcopy() - копирует объект включая вложенные структуры полностью.

```python
import copy

original_dict = {'name': 'John', 'age': 25, 'hobbies': ['reading', 'painting']}
copied_dict = original_dict.copy()

copied_dict['age'] = 30
copied_dict['hobbies'].append('swimming')

print(original_dict)  # {'name': 'John', 'age': 25, 'hobbies': ['reading', 'painting', 'swimming']}
print(copied_dict)    # {'name': 'John', 'age': 30, 'hobbies': ['reading', 'painting', 'swimming']}
```

В этом примере мы создаем копию словаря original_dict с помощью метода copy(). 
Затем мы изменяем значение ключа 'age' и добавляем новый элемент в список значений ключа 'hobbies' в copied_dict. 
Мы видим, что изменения отражаются и в original_dict, так как метод copy() создает поверхностную копию, 
которая ссылается на те же вложенные объекты.

Если вы хотите создать полностью независимую копию объекта, включая все вложенные объекты, 
вам следует использовать функцию deepcopy() из модуля copy.

### Чем отличается is от ==
is сравнивает объекты по ссылке (по id())  (проверяет указывают ли переменные на один объект)
== сравнивает объекты по значению (проверяет на равенство значения объектов)

### Предельно допустимый размен переменной в Python
Размер переменной никак не ограничивается на уровне Python
Но сама переменная(объект на который она ссылается) может быть ограничена ресурсами системы компьютера

### Что такое переменная PYTHONPATH?
PYTHONPATH - это переменная среды, которая определяет пути, 
в которых интерпретатор Python будет искать модули и пакеты при импорте.

Переменная PYTHONPATH содержит список директорий, разделенных символом пути, 
в которых интерпретатор Python будет искать модули. 
Когда вы пытаетесь импортировать модуль, интерпретатор Python просматривает каждую директорию, 
указанную в PYTHONPATH, в поисках соответствующего модуля.

пример установки переменной PYTHONPATH:

```python
import sys

# Добавление пути в sys.path
sys.path.append('/path/to/your/directory')

```

### Известные PEP

PEP 8: Стиль кодирования Python.
PEP 20: "The Zen of Python" (Философия Python) - import this.
PEP 257: Стандартный стиль написания документаций (docstrings) в Python.
PEP 484: Аннотации типов. Он вводит возможность аннотировать типы данных в функциях, 
  переменных и возвращаемых значениях 

### Что делает оператор морж :=

Оператор морж := является оператором присваивания с объявлением значения (walrus operator) в Python, 
был введен в Python 3.8. Он позволяет присваивать значение переменной внутри выражения и 
имеет следующий синтаксис:

<переменная> := <выражение>

Здесь <переменная> - это переменная, которой мы хотим присвоить значение, а <выражение> - это выражение, 
значение которого мы хотим присвоить переменной.

Пример использования оператора морж:
```python
# Присваивание значения переменной внутри выражения
if (n := len(my_list)) > 10:
    print(f"Длина списка равна {n} и больше 10.")
```

В этом примере мы присваиваем длину списка my_list переменной n и проверяем, 
больше ли она 10. Если условие истинно, мы выводим сообщение с длиной списка.


### Чем файл pyc отличается от py

Файлы .py содержат исходный код на языке Python. Это текстовые файлы, 
которые могут быть прочитаны и изменены с помощью текстового редактора. 

Файлы с расширением .pyc(compiled) представляют собой скомпилированные версии файлов .py. 
Когда файл .py выполняется в интерпретаторе Python, он компилируется в байт-код, 
который сохраняется в файле .pyc. Файл .pyc содержит байт-код, который можно сразу отправить PVM, 
минуя процесс компиляции, это ускоряет процесс выполнения кода.

### Что такое литерал 

В контексте типов данных литерал это выражение которое генерирует тип данных
Например квадратные скобки создают список, круглые скобки кортеж, кавычки - строку
Некоторые объекты типа можно создать используя литерал или ключевое слово, но например пустой set() 
можно создать только с помощью ключевого слова.
[] - list, () - tuple, {} - dict

### Чем отличается маг. метод __dict__ от функции dir()

Магический метод __dict__ возвращает словарь атрибутов объекта только для этого конкретного объекта класса. 
Он содержит только атрибуты, которые были явно определены или изменены для этого объекта.

Функция dir() возвращает список всех доступных атрибутов и методов для объекта, включая атрибуты и методы, 
унаследованные от родительских классов. Она позволяет получить полный список всех имен, 
которые можно использовать с объектом класса.

Вот пример, который продемонстрирует разницу:

```python
class Parent:
    parent_attr = "Parent Attribute"

class Child(Parent):
    child_attr = "Child Attribute"

child = Child()

print(child.__dict__)  # {'child_attr': 'Child Attribute'}
print(dir(child))  # ['__class__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', 'child_attr', 'parent_attr']
```

Здесь child.__dict__ возвращает только атрибуты, определенные для объекта child, включая child_attr, 
который определен в самом классе Child.

dir(child) возвращает список всех доступных атрибутов и методов для объекта child, 
включая атрибуты, унаследованные от родительского класса Parent, такие как parent_attr.

### Что такое аннотации типов
Аннотации типов (type annotations) в Python представляют собой возможность указывать типы данных переменных, 
аргументов функций и возвращаемых значений функций в коде.

Аннотации типов не влияют на выполнение кода во время выполнения, 
они являются статическими подсказками для разработчиков и инструментов статического анализа кода. 
Они помогают улучшить понимание кода, облегчить его поддержку и улучшить его документацию.

### Что такое аннотация Union, Optinal

Union - позволяет объединять типы для аннотации аргументов или возвращаемых значений функции
например 
```python
def process_data(value: Union[int, float, str]):
  ...
```
value может принимать значение int или float или str

Optinal - аннотация для случая, когда аргумент или возвращаемое значение
может относится к какому то типу или принимать значение None
Эквивалентно Union[value, None]
```python
from typing import Optional

def process_data(value: Optional[int]):
  ...
```
Optional позволяет указать, что аргумент функции или переменная может быть необязательной 
и может принимать значение None. 
Union позволяет указать несколько возможных типов данных для переменной или аргумента функции.

### Что такое виртуальное окружение

Виртуальное окружение (virtual environment) - это изолированное окружение Python, 
которое позволяет управлять зависимостями и пакетами для различных проектов независимо друг от друга.

Когда вы создаете виртуальное окружение, 
вы создаете отдельную копию интерпретатора Python. 
Все пакеты, установленные внутри виртуального окружения, будут доступны только в этом окружении и 
не будут влиять на другие виртуальные окружения или глобальное окружение Python.

### Что такое poetry, в чем преимущество перед pip

Poetry - это инструмент для управления зависимостями и сборки проектов на языке Python. 
Он предоставляет удобные средства для управления зависимостями, создания виртуальных окружений, 
сборки и установки пакетов

основное преимущество перед pip - это удобный механизм разрешения зависимостей пакетов

### Что такое Python wheels

Это бинарники для более быстрой установки пакетов 

### Что такое линтеры и форматеры(flake8, pylint, sonarlint, black)
Линтеры и форматеры - это инструменты для статического анализа кода, 
которые помогают обнаружить потенциальные проблемы и следовать соглашениям о стиле кодирования. 

### Что такое mypy

Mypy - это инструмент для статической типизации кода на языке Python. 
Он позволяет добавить аннотации типов к коду и проверяет их соответствие во время компиляции. 
mypy помогает обнаруживать потенциальные ошибки типизации и улучшает надежность и читаемость кода.

### Какой общий набор операций у всех последовательностей

1) индексация
2) вычисление длины
3) срезы
4) конкатенация



## Типы и встроенные структуры данных

### Основные типы данных в Python

- Числа
- Строки
- Списки
- Кортежи
- Словари
- Множества
- Файлы
- Прочие: Boolean, None, Type, Встроенные функции, пользовательские классы

### Какие типы данных относятся к встроенным структурам данных

Списки, Словари, Множества(изменяемые структуры)
Кортежи(неизменяемые)

### Для чего используется тип decimal. В каких случаях он лучше подходит чем float
Тип decimal в Python используется для точной арифметики с фиксированной точностью. 
Этот тип используется для точного представления десятичных чисел 
и для преодоления ограничений арифметических операций с плавающей точкой.

### как можно перевести целое число в шестнадцатирично/восьмиричное/двоичное и обратно

hex() - шестнадцатеричная
oct() - восьмеричная
bin() - двоичная

обратный перевод
```python
hex_num = '0x2a'
int(hex_num, 16)

oct_num = '0o52'
int(oct_num, 8)

bin_num = '0b101010'
int(bin_num, 2)
```
### Строки Методы строк

В Python, тип данных "строка" (str) представляет последовательность символов и 
используется для работы с текстовыми данными. 
Строки в Python являются неизменяемыми объектами, что означает, 
что после создания строки она не может быть изменена.
Строка являются последовательностью, поэтому поддерживает срезы, конкатенацию, повторение, 
индексацию и вычисление длины

len() - возвращает длину строки (количество символов).
lower() - преобразует все символы строки в нижний регистр.
upper() - преобразует все символы строки в верхний регистр.
capitalize() - преобразует первый символ строки в верхний регистр, а все остальные символы в нижний регистр.
title() - преобразует первый символ каждого слова в строке в верхний регистр, а все остальные символы в нижний регистр.
strip() - удаляет пробельные символы (пробел, табуляцию, перевод строки) с начала и конца строки.
split() - разделяет строку на подстроки, используя заданный разделитель, и возвращает список подстрок.
join() - объединяет список строк в одну строку, вставляя между ними указанный разделитель.
replace() - заменяет все вхождения указанной подстроки в строке на другую подстроку.
startswith() - проверяет, начинается ли строка с указанной подстроки.
endswith() - проверяет, заканчивается ли строка указанной подстрокой.
find() - находит первое вхождение указанной подстроки в строке и возвращает его индекс (или -1, если подстрока не найдена).
count() - подсчитывает количество вхождений указанной подстроки в строке.


### Какие виды строк бывают в Python
```python
'hello' # обычные строки 
r'hello\n' # сырые строки 
f'hello {name}' # форматируемые строки
b'hello' # some_string.encode('utf-8')байтовый строки, [(i, ord(i), hex(ord(i))) for i in 'hello']
```

### Как кодировать и декодировать строки
```python
string = 'Привет, мир!'
byte_string = string.encode('utf-8') # кодирование
```
```python
byte_string = b'\xd0\x9f\xd1\x80\xd0\xb8\xd0\xb2\xd0\xb5\xd1\x82, \xd0\xbc\xd0\xb8\xd1\x80!'
string = byte_string.decode('utf-8') # декодирование
```

### Списки. Методы списков. Как устроен под капотом
В Python списки (list) являются одной из основных встроенных структур данных. 
Список это изменяемый тип данных
Как последовательность список поддерживает
- вычисление длины
- индексацию
- срезы
- конкатенацию и повторение()
Списки могут содержать в себе любые элементы и поддерживают произвольную вложенность

append(element): Добавляет элемент в конец списка.
extend(<iterable>): Расширяет список элементами итерируемого объекта.
insert(index, element): Вставляет элемент на указанную позицию.
remove(element): Удаляет первое вхождение указанного элемента из списка.
pop(index): Удаляет и возвращает элемент по указанному индексу.
sort(): Сортирует список по возрастанию.
reverse(): Изменяет порядок элементов на обратный.

### Чем кортеж отличается от списка?
Обе структуры данных являются последовательностями, 
но список изменяемый, а кортеж неизменяемый

### В каких случаях лучше использовать кортеж, а в каких список

Кортежи

Требуется создать неизменяемую последовательность элементов. 
Когда требуется хранить данные, которые не должны изменяться. 
когда нужна более быстрая и меньшая структура данных. 
Кортежи требуют меньше памяти и имеют более быстрый доступ к элементам, поскольку они неизменяемы.

Используйте списки, когда:

Необходима изменяемая последовательность элементов. 
Списки позволяют добавлять, удалять или изменять элементы.
Требуется динамическое изменение размера. 

### что такое срез

Срез (slice) в Python - это способ получения подпоследовательности элементов из последовательности 
(строки, списка или кортежа). 
Срез позволяет выбирать элементы на основе их индексов и задавать определенный диапазон.
Синтаксис среза выглядит следующим образом: sequence[start:stop:step]

### Кортежи. Методы кортежей

Кортежи  являются неизменяемыми структурами данных и относятся к последовательностям
(поддерживают вычисление длины, срезы, индексацию конкатенацию и повторение) 

Методы
tuple.count(value) - возвращает количество вхождений указанного значения в кортеже.
tuple.index(value) - возвращает индекс первого вхождения указанного значения в кортеже. 
Если значение не найдено, возникает исключение ValueError.


### Можно ли изменить список внутри кортежа

Да, список внутри кортежа можно изменить, потому что кортеж хранит в себе ссылки на 
объекты списка, так как списки изменяемые объекты, то изменении объект останется тот же(ссылка не измениться)
Кортеж останется неизменным.

### Можно ли изменить кортеж внутри списка

Нет, кортеж изменить нельзя, так как это неизменяемый объект
